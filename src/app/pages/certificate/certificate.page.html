<ion-content class="ion-padding certificate-content">
  <!-- Input Section -->
  <div class="input-container" *ngIf="showInput">
    <div class="input-card">
      <ion-icon name="ribbon-outline" class="hero-icon"></ion-icon>
      <h2>Get Your Certificate</h2>
      <p>Enter your full name as you want it to appear on your official certificate.</p>
      
      <ion-item lines="none" class="custom-input">
        <ion-label position="stacked">Full Name</ion-label>
        <ion-input [(ngModel)]="userName" placeholder="e.g. John Doe"></ion-input>
      </ion-item>
      
      <ion-button expand="block" (click)="generatePreview()" class="generate-btn">
        Generate Certificate
      </ion-button>
    </div>
  </div>

  <!-- Certificate Preview -->
  <div class="preview-container" *ngIf="!showInput">
    
    <!-- The Certificate Node to Capture -->
    <div class="certificate-wrapper" #certificateNode>
      <div class="certificate-border">
        <div class="certificate-inner">
          
          <div class="header">
            <div class="logo">
              <ion-icon name="code-slash"></ion-icon>
              <span>Coding Tamilan</span>
            </div>
            <div class="id-number">ID: {{ generatedId }}</div>
          </div>
          
          <div class="title">
            Certificate of Completion
          </div>
          
          <div class="subtitle">
            This is to certify that
          </div>
          
          <div class="student-name">
            {{ userName }}
          </div>
          
          <div class="description">
            has successfully completed the course
          </div>
          
          <div class="course-name">
            {{ courseName }}
          </div>
          
          <div class="footer">
            <div class="date-section">
              <div class="line"></div>
              <div class="label">Date: {{ completionDate }}</div>
            </div>
            
            <div class="seal">
              <ion-icon name="ribbon"></ion-icon>
            </div>
            
            <div class="sign-section">
              <div class="line signature">Coding Tamilan</div>
              <div class="label">Instructor</div>
            </div>
          </div>
          
        </div>
      </div>
    </div>

    <!-- Actions -->
    <div class="actions">
      <ion-button expand="block" fill="outline" (click)="shareCertificate('image')">
        <ion-icon name="image-outline" slot="start"></ion-icon>
        Download Image
      </ion-button>
      
      <ion-button expand="block" (click)="shareCertificate('pdf')">
        <ion-icon name="document-text-outline" slot="start"></ion-icon>
        Download PDF
      </ion-button>
      
      <ion-button fill="clear" (click)="showInput = true" size="small" color="medium">
        Edit Name
      </ion-button>
    </div>
    
  </div>
</ion-content>
