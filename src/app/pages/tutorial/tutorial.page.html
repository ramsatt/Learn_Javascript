<ion-header class="ion-no-border">
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-button (click)="goHome()">
        <ion-icon slot="icon-only" name="arrow-back-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title class="tutorial-title">{{ title }}</ion-title>
  </ion-toolbar>
  <ion-progress-bar type="indeterminate" *ngIf="loading"></ion-progress-bar>
</ion-header>

<ion-content class="ion-padding tutorial-page-content gamified-content">
  <div class="content-container">
    <div *ngIf="loading" class="loading-state">
      <p>Fetching content...</p>
    </div>
    
    <div *ngIf="!loading && content">
        <div [innerHTML]="content" class="tutorial-content"></div>
        
        <!-- Navigation Footer -->
        <div class="tutorial-footer" style="margin-top: 50px; text-align: center;">
            <p>End of Lesson</p>
            <ion-button (click)="completeLesson()" expand="block" color="secondary" shape="round" class="complete-btn">
                Mark as Complete
            </ion-button>
            <ion-button (click)="goHome()" fill="clear" color="light" style="margin-top: 10px;">
                <ion-icon name="arrow-back" slot="start"></ion-icon>
                Back to Map
            </ion-button>
        </div>
    </div>
  </div>

  <!-- Success Overlay -->
  <div class="success-overlay" *ngIf="showSuccess">
      <div class="success-card">
          <div class="success-icon">
              <ion-icon name="trophy"></ion-icon>
          </div>
          <h2>Lesson Complete!</h2>
          <div class="xp-reward">
              <span class="plus">+</span>
              <span class="amount">{{ xpAwarded }}</span>
              <span class="label">XP</span>
          </div>
          <ion-button expand="block" color="warning" shape="round" (click)="continueNext()">
              Continue Journey
          </ion-button>
      </div>
  </div>
</ion-content>
