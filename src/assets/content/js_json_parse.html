
      

<h1>JSON.parse()</h1>

<hr>
<!--start-->
<p class="intro">A common use of JSON is to exchange data to/from a web server.</p>
<p class="intro">When receiving data from a web server, the data is always a string.</p>
<p class="intro">Parse the data with <code class="w3-codespan">JSON.parse()</code>, and the data becomes a JavaScript object.</p>
<hr>
<h2>Example - Parsing JSON</h2>
<p>Imagine we received this text from a web server:</p>
<div class="w3-example">
<pre class="w3-code"><code class="language-javascript">'{"name":"John", "age":30, "city":"New York"}'</code></pre>
</div>

<p>Use the JavaScript function <code class="w3-codespan">JSON.parse()</code> to convert text into a JavaScript object:</p>

<div class="w3-example">
<pre class="w3-code"><code class="language-javascript">const obj = JSON.parse('{"name":"John", "age":30, "city":"New York"}');</code></pre>
</div>

<div class="w3-panel ws-note">
<p>Make sure the text is in JSON format, or else you will get a syntax error.</p>
</div>

<p>Use the JavaScript object in your page:</p>

<div class="w3-example">
<h3>Example</h3>
<pre class="w3-code"><code class="language-html">&lt;p id="demo"&gt;&lt;/p&gt;
&lt;script&gt;
document.getElementById("demo").innerHTML = obj.name;
&lt;/script&gt;</code></pre>

</div>
<!--stop-->
<hr>
<!--start-->
<h2>Array as JSON</h2>
<p>When using the <code class="w3-codespan">JSON.parse()</code> on a JSON derived from an array, the method will 
return a JavaScript array, instead of a JavaScript object.</p>
<div class="w3-example">
<h3>Example</h3>
<pre class="w3-code"><code class="language-javascript">const text = '["Ford", "BMW", "Audi", "Fiat"]';
const myArr = JSON.parse(text);</code></pre>
  
</div>
<!--stop-->
<hr>

<hr>
<!--start-->
<h2>Exceptions</h2>
<h3>Parsing Dates</h3>
<p>Date objects are not allowed in JSON.</p>
<p>If you need to include a date, write it as a string.</p>
<p>You can convert it back into a date object later:</p>
<div class="w3-example">
<h3>Example</h3>
  <p>Convert a string into a date:</p>
<pre class="w3-code"><code class="language-javascript">const text = '{"name":"John", "birth":"1986-12-14", "city":"New York"}';
const obj = JSON.parse(text);
obj.birth = new Date(obj.birth);
document.getElementById("demo").innerHTML = obj.name + ", " + obj.birth;</code></pre>

</div>
<p>Or, you can use the second parameter, of the <code class="w3-codespan">JSON.parse()</code> function, called <em>reviver</em>.</p>
<p>The <em>reviver</em> parameter is a function that checks each property, 
before returning the value.</p>
<div class="w3-example">
<h3>Example</h3>
  <p>Convert a string into a date, using the <em>reviver</em> function:</p>
<pre class="w3-code"><code class="language-javascript">const text = '{"name":"John", "birth":"1986-12-14", "city":"New York"}';
const obj = JSON.parse(text, function (key, value) {
  if (key == "birth") {
    return new Date(value);
  } else {
    return value;
  }
});
document.getElementById("demo").innerHTML = obj.name + ", " + obj.birth;</code></pre>
  
</div>
<h3>Parsing Functions</h3>
<p>Functions are not allowed in JSON.</p>
<p>If you need to include a function, write it as a string.</p>
<p>You can convert it back into a function later:</p>
<div class="w3-example">
<h3>Example</h3>
  <p>Convert a string into a function:</p>
<pre class="w3-code"><code class="language-javascript">const text = '{"name":"John", "age":"function () {return 30;}", "city":"New York"}';
const obj = JSON.parse(text);
obj.age = eval("(" + obj.age + ")");
document.getElementById("demo").innerHTML = obj.name + ", " + obj.age();</code></pre>
  
</div>
<div class="w3-panel ws-warning">
<p>You should avoid using functions in JSON, the functions will lose their scope, 
and you would have to use <code class="w3-codespan">eval()</code> to convert them back into functions.</p>
</div>
<!--stop-->
<br>

<div class="w3-clear nextprev">
<a class="w3-left w3-btn" href="js_json_datatypes.html">❮ Previous</a>
<a class="w3-right w3-btn" href="js_json_stringify.html">Next ❯</a>
</div>


