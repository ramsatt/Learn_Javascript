
      

<h1>JavaScript Common Mistakes</h1>

<hr>
<!--start-->
<p class="intro">This chapter points out some common JavaScript mistakes.</p>
<hr>
<h2>Accidentally Using the Assignment Operator </h2>
<p>JavaScript programs may generate unexpected results if a programmer 
accidentally uses an assignment operator (<code class="w3-codespan">=</code>), instead of a comparison operator 
(<code class="w3-codespan">==</code>) in an if statement. </p>
<p>This <code class="w3-codespan">if</code> statement returns <code class="w3-codespan">false</code> (as 
expected) because x is 
not equal to 10:</p>
<div class="w3-example">
<pre class="w3-code"><code class="language-javascript">let x = 0;
if (x == 10)</code></pre>

</div>
<p>This <code class="w3-codespan">if</code> statement returns <code class="w3-codespan">true</code> (maybe not 
as expected), because 10 is  
true:</p>
<div class="w3-example">
<pre class="w3-code"><code class="language-javascript">let x = 0;
if (x = 10)</code></pre>

</div>
<p>This <code class="w3-codespan">if</code> statement returns <code class="w3-codespan">false</code> (maybe not 
as expected), because 0 is  
false:</p>
<div class="w3-example">
<pre class="w3-code"><code class="language-javascript">let x = 0;
if (x = 0)</code></pre>

</div>

<div class="w3-panel ws-note">
<p>An assignment always returns the value of the assignment.</p>
</div>

<!--stop-->
<hr>
<!--start-->
<h2>Expecting Loose Comparison</h2>
<p>In regular comparison, data type does not matter. This <code class="w3-codespan">if</code> statement returns 
true:</p>
<div class="w3-example">
<pre class="w3-code"><code class="language-javascript">let x = 10;
let y = "10";
if (x == y)</code></pre>

</div>
<p>In strict comparison, data type does matter. This <code class="w3-codespan">if</code> statement returns false:</p>
<div class="w3-example">
<pre class="w3-code"><code class="language-javascript">let x = 10;
let y = "10";
if (x === y)</code></pre>

</div>

<p>It is a common mistake to forget that <code class="w3-codespan">switch</code> statements use strict 
comparison:</p>
<p>This <code class="w3-codespan">case switch</code> will display an alert:</p>
<div class="w3-example">
<pre class="w3-code"><code class="language-javascript">let x = 10;
switch(x) {
  case 10: alert("Hello");
}</code></pre>

</div>
<p>This <code class="w3-codespan">case switch</code> will not display an alert:</p>

<div class="w3-example">
<pre class="w3-code"><code class="language-javascript">let x = 10;
switch(x) {
  case "10": alert("Hello");
}</code></pre>

</div>
<!--stop-->
<hr>


<hr>
<!--start-->
<h2>Confusing Addition &amp; Concatenation </h2>
<p><strong>Addition</strong> is about adding <strong>numbers</strong>.</p>
<p><strong>Concatenation</strong> is about adding <strong>strings</strong>.</p>
<p>In JavaScript both operations use the same <code class="w3-codespan">+</code> operator.</p>
<p>Because of this, adding a number as a number will produce a different 
result from adding a number as a string:</p>

<div class="w3-example">
<pre class="w3-code"><code class="language-javascript">let x = 10;
x = 10 + 5;       // Now x is 15
let y = 10;
y += "5";        // Now y is "105"</code></pre>

</div>
<p>When adding two variables, it can be difficult to anticipate the result:</p>

<div class="w3-example">
<pre class="w3-code"><code class="language-javascript">let x = 10;
let y = 5;
let z = x + y;     // Now z is 15
let x = 10;
let y = "5";
let z = x + y;     // Now z is "105"</code></pre>

</div>
<!--stop-->
<hr>
<!--start-->
<h2>Misunderstanding Floats </h2>
<p>All numbers in JavaScript are stored as 64-bits <strong>Floating point numbers</strong> 
(Floats).</p>
<p>All programming languages, including JavaScript, have difficulties with 
precise floating point values:</p>

<div class="w3-example">
<pre class="w3-code"><code class="language-javascript">let x = 0.1;
let y = 0.2;
let z = x + y            // the result in z will not be 0.3</code></pre>

</div>
<p>To solve the problem above, it helps to multiply and divide:</p>
<div class="w3-example">
<h3>Example</h3>
<pre class="w3-code"><code class="language-javascript">let z = (x * 10 + y * 10) / 10;       // z will be 0.3</code></pre>

</div>
<!--stop-->
<hr>
<!--start-->
<h2>Breaking a JavaScript String</h2>
<p>JavaScript will allow you to break a statement into two lines:</p>

<div class="w3-example">
<h3>Example 1</h3>
<pre class="w3-code"><code class="language-javascript">let x =
"Hello World!";</code></pre>

</div>
<p>But, breaking a statement in the middle of a string will not work:</p>

<div class="w3-example">
<h3>Example 2</h3>
<pre class="w3-code"><code class="language-javascript">let x = "Hello
World!";</code></pre>

</div>
<p>You must use a "backslash" if you must break a statement in a string:</p>

<div class="w3-example">
<h3>Example 3</h3>
<pre class="w3-code"><code class="language-javascript">let x = "Hello \
World!";</code></pre>

</div>
<!--stop-->
<hr>
<!--start-->
<h2>Misplacing Semicolon</h2>
<p>Because of a misplaced semicolon, this code block will execute regardless of 
the value of x:</p>
<div class="w3-example">
<pre class="w3-code"><code class="language-javascript">if (x == 19);
{
  // code block 
}</code></pre>

</div>
<!--stop-->
<hr>
<!--start-->
<h2>Breaking a Return Statement</h2>
<p>It is a default JavaScript behavior to close a statement automatically at the 
end of a line.</p>
<p>Because of this, these two examples will return the same result:</p>
<div class="w3-example">
<h3>Example 1</h3>
<pre class="w3-code"><code class="language-javascript">function myFunction(a) {
  let power = 10 
  return a * power
}</code></pre>

</div>
<div class="w3-example">
<h3>Example 2</h3>
<pre class="w3-code"><code class="language-javascript">function myFunction(a) {
  let power = 10;
  return a * power;
}</code></pre>

</div>
<p>JavaScript will also allow you to break a statement into two lines.</p>

<p>Because of this, example 3 will also return the same result:</p>
<div class="w3-example">
<h3>Example 3</h3>
<pre class="w3-code"><code class="language-javascript">function myFunction(a) {
  let
  power = 10; 
  return a * power;
}</code></pre>

</div>
<p>But, what will happen if you break the return statement in two lines like 
this:</p>
<div class="w3-example">
<h3>Example 4</h3>
<pre class="w3-code"><code class="language-javascript">function myFunction(a) {
  let
  power = 10; 
  return
  a * power;
}</code></pre>

</div>
<p>
The function will return <code class="w3-codespan">undefined</code>!</p>
<p>
Why? Because JavaScript thought you meant:</p>
<div class="w3-example">
<h3>Example 5</h3>
<pre class="w3-code"><code class="language-javascript">function myFunction(a) {
  let
  power = 10; 
  return;
  a * power;
}</code></pre>

</div>
<!--stop-->
<hr>
<!--start-->
<h2>Explanation</h2>
<p>
If a statement is incomplete like:</p>
<div class="w3-example">
<pre class="w3-code"><code class="language-javascript">let</code></pre>
</div>
<p>
JavaScript will try to complete the statement by reading the next line:</p>
<div class="w3-example">
 <pre class="w3-code"><code class="language-javascript">power = 10;</code></pre>
</div>
<p>
But since this statement is complete: </p>
<div class="w3-example">
 <pre class="w3-code"><code class="language-javascript">return</code></pre>
</div>
<p>
JavaScript will automatically close it like this:</p>
<div class="w3-example">
 <pre class="w3-code"><code class="language-javascript">return;</code></pre>
</div>
<p>
This happens because closing (ending) statements with semicolon is optional in 
JavaScript.</p>
<p>
JavaScript will close the return statement at the end of the line, because 
it is a complete statement.</p>

<div class="w3-panel ws-warning">
<p>Never break a return statement.</p>
</div>

<!--stop-->
<hr>
<!--start-->
<h2>Accessing Arrays with Named Indexes</h2>
<p>Many programming languages support arrays with named indexes.</p>
<p>Arrays with named indexes are called associative 
arrays (or hashes).</p>
<p>JavaScript does <strong>not</strong> support arrays with named indexes.</p>
<p>In JavaScript, <strong>arrays</strong> use <strong>numbered indexes</strong>:&nbsp;&nbsp; </p>

<div class="w3-example">
 <h3>Example</h3>
<pre class="w3-code"><code class="language-javascript">const person = [];
person[0] = "John";
person[1] = "Doe";
person[2] = 46;
person.length;       // person.length will return 3
person[0];           // person[0] will return "John"</code></pre>

</div>
<p>In JavaScript, <strong>objects</strong> use <strong>named indexes</strong>. </p>
<p>If you use a named index, when accessing an array, JavaScript will redefine 
the array to a standard object.</p>
<p>After the automatic redefinition, array methods and properties will produce undefined or 
incorrect results:</p>

<div class="w3-example">
<h3>Example:</h3>
<pre class="w3-code"><code class="language-javascript">const person = [];
person["firstName"] = "John";
person["lastName"] = "Doe";
person["age"] = 46;
person.length;      // person.length will return 0
person[0];          // person[0] will return undefined</code></pre>

</div>
<!--stop-->
<hr>
<!--start-->
<h2>Ending Definitions with a Comma</h2>
<p>Trailing commas in object and array definition are legal in ECMAScript 5.</p>
<div class="w3-example">
<h3>Object Example:</h3>
<pre class="w3-code"><code class="language-javascript">person = {firstName:"John", lastName:"Doe", age:46,}</code></pre>
</div>

<div class="w3-example">
<h3>Array Example:</h3>
<pre class="w3-code"><code class="language-javascript">points = [40, 100, 1, 5, 25, 10,];</code></pre>
</div>
<div class="w3-panel ws-warning">
<p>WARNING !!</p>
<p>Internet Explorer 8 will crash.</p>
<p>JSON does not allow trailing commas.</p>
</div>
<div class="w3-example">
<h3>JSON:</h3>
<pre class="w3-code"><code class="language-javascript">person = {"firstName":"John", "lastName":"Doe", "age":46}</code></pre>
</div>
<div class="w3-example">
<h3>JSON:</h3>
<pre class="w3-code"><code class="language-javascript">points = [40, 100, 1, 5, 25, 10];</code></pre>
</div>

<!--stop-->
<hr>
<!--start-->
<h2>Undefined is Not Null</h2>
<p>JavaScript objects, variables, properties, and methods can be <code class="w3-codespan">undefined</code>.</p>
<p>In addition, empty JavaScript objects can have the value <code class="w3-codespan">null</code>.</p>
<p>This can make it a little bit difficult to test if an object is empty.</p>
<p>You can test if an object exists by testing if the type is <code class="w3-codespan"> undefined</code>:</p>

<div class="w3-example">
<h3>Example:</h3>
<pre class="w3-code"><code class="language-javascript">if (typeof myObj === "undefined")</code></pre>

</div>
<p>But you cannot test if an object is <code class="w3-codespan">null</code>, because this will throw an error if the 
object is <code class="w3-codespan">undefined</code>:</p>

<div class="w3-example">
  <h3>Incorrect:</h3>
<pre class="w3-code"><code class="language-javascript">if (myObj === null)</code></pre>
</div>
<p>To solve this problem, you must test if an object is not <code class="w3-codespan">null</code>, 
and not <code class="w3-codespan">undefined</code>.</p>
<p>But this can still throw an error:</p>

<div class="w3-example">
  <h3>Incorrect:</h3>
<pre class="w3-code"><code class="language-javascript">if (myObj !== null &amp;&amp; typeof myObj !== "undefined")</code></pre>
</div>
<p>Because of this, you must test for not <code class="w3-codespan">undefined</code> before you can 
test for not <code class="w3-codespan">null</code>:</p>

<div class="w3-example">
<h3>Correct:</h3>
<pre class="w3-code"><code class="language-javascript">if (typeof myObj !== "undefined" &amp;&amp; myObj !== null)</code></pre>

</div>
<!--stop-->
<hr>
<br>
<div class="w3-clear nextprev">
<a class="w3-left w3-btn" href="js_best_practices.html">❮ Previous</a>
<a class="w3-right w3-btn" href="js_performance.html">Next ❯</a>
</div>


